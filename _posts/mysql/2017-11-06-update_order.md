---
layout: post
title: mysql UPDATE문 복수열 갱신 순서
published: True
categories: 
- mysql
tags:
- Database
- mysql
- SQL 첫걸음
---


## UPDATE 명령
* UPDATE 명령은 이미 존재하는 행에 대해 값을 갱신하므로 이전의 값과 이후의 값의 두 가지 상태를 생각할 수 있다.
* UPDATE sample SET no = no + 1 에서 보면 이전의 no의 값에 1을 더한 값으로 이후의 no 열에 갱신한다.


## 복수열 갱신
* UPDATE 명령에는 복수의 열을 갱신할 수 있는데, 갱신할 식은 SET 구에 다음과 같이 콤마(,)로 구분하여 작성한다.
* 그런데, 아래와 같은 복수열 갱신을 하고자 할 때, 두 쿼리의 처리 순서가 다르며 결과 값에 차이가 있을까.
1. UPDATE sample SET no1 = no1 + 1, no2 = no1
2. UPDATE sample SET no2 = no1, no1 = no1 + 1
<br/>

* **정답은 데이터베이스 제품에 따라 다르다.**
* 대표적인 데이터베이스을 예로들면, mysql은 서로 다른 결과 값을 가지지만 oracle은 같은 결과를 가진다.
* 그러면 어떻게 처리되는지 본다.

## mysql 복수열 갱신 결과
* 먼저 다음과 같은 형태의 테이블이 있다고 치자.  

| Method    | Description                              |
| :-------- | :--------------------------------------- |
| ?         | 물음표는 0번 또는 1차례까지의 발생을 의미한다. 이를테면 colou?r는 "color"와 "colour"를 둘 다 일치시킨다. |
| *         | 별표는 0번 이상의 발생을 의미한다. 이를테면 ab*c는 "ac", "abc", "abbc", "abbbc" 등을 일치시킨다. |
| +         | 덧셈 기호는 1번 이상의 발생을 의미한다. 이를테면 ab+c는 "abc", "abbc", "abbbc" 등을 일치시키지만 "ac"는 일치시키지 않는다. |
| {n}       | 정확히 n 번만큼 일치시킨다.                         |
| {min,}    | "min"번 이상만큼 일치시킨다.                       |
| {min,max} | 적어도 "min"번만큼 일치시키지만 "max"번을 초과하여 일치시키지는 않는다. |

| no    | a                              |
| :-------- | :--------------------------------------- |
| 2         | 0 |
| 3         | 0 |
<br/>

1. UPDATE sample SET no = no + 1, a = no 의 결과  
| no    | a                              |
| :-------- | :--------------------------------------- |
| 3         | 3 |
| 4         | 4 |

2. UPDATE sample SET a = no, no = no + 1 의 결과  
| no    | a                              |
| :-------- | :--------------------------------------- |
| 3         | 2 |
| 4         | 3 |

